<!DOCTYPE html>
<html>
<head>
    <!-- CSS only -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">

    <!-- JS, Popper.js, and jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

    <!-- Charts.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js" integrity="sha512-s+xg36jbIujB2S2VKfpGmlC3T5V2TF3lY48DX7u2r9XzGzgPsa6wTpOQA7J9iffvdeBN0q9tKzRxVxw1JviZPg==" crossorigin="anonymous"></script>

    <style>
    img { object-fit: contain; }
    canvas {
      -moz-user-select: none;
      -webkit-user-select: none;
      -ms-user-select: none;
    }
    </style>

    <style>
    img { object-fit: contain; }
    </style>

    <title>{{items.name}}</title>
</head>
<body>

<h1><center>{{items.name}}</center></h1>

<br><br>

<div id="outer" class="container d-flex align-items-center justify-content-center">

<div class="media">

    <figure class="figure">
        <a href=https://www.wikidata.org/wiki/{{items.wiki_id}} target="_blank">
        <img src={{items.image}} class="figure-img img-fluid rounded" width="240" height="300">
    </a>
        <figcaption class="figure-caption" style="text-align:center;">
            <a href=https://www.wikidata.org/wiki/{{items.wiki_id}} target="_blank">Editar na Wikidata</a>
        </figcaption>
    </figure>

    <div class="media-body">
        <table class="table">
          <tbody>
          {% for item in items.parties %}
            <tr>
              <td><img src={{item.image_url}} class="figure-img img-fluid rounded" width="60" height="75"></td>
            </tr>
            <tr>
              <td>{{item.name}}</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>

    </div>

    <div class="media-body">
    <h5 class="mt-0">Cargos ocupados</h5>
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Início</th>
              <th scope="col">Fim</th>
              <th scope="col">Cargo</th>
            </tr>
          </thead>
          <tbody>
          {% for item in items.offices %}
            <tr>
              <td>{{item.start}}</td>
              <td>{{item.end}}</td>
              <td>{{item.position}}</td>
            </tr>
          {% endfor %}
          </tbody>
        </table>
  </div>
</div>
</div>

<!--
    # https://www.chartjs.org/samples/latest/scales/time/financial.html
    # https://www.chartjs.org/docs/latest/axes/cartesian/time.html
-->


<div class="container h-100">
  <div class="row h-100 justify-content-center align-items-center">
    <canvas id="myChart" width="900" height="250"></canvas>
  </div>
</div>

<script>
var ctx = document.getElementById('myChart');
var color = Chart.helpers.color;

var year_labels = {{ items['year_month_labels']|tojson }};
var opposed_freq = {{ items['opposed_freq']|tojson }};
var supported_freq = {{ items['supported_freq']|tojson }};
var opposed_by_freq = {{ items['opposed_by_freq']|tojson }};
var supported_by_freq = {{ items['supported_by_freq']|tojson }};

var myChart = new Chart(ctx, {
    type: 'line',
    data: {labels: year_labels,
           datasets: [
                {label: 'Opposed', borderColor: "#FF0000", fill: false, data: opposed_freq},
                {label: 'Opposed By', borderColor: "#980000", fill: false, data: opposed_by_freq},
                {label: 'Supported', borderColor: "#44861E", fill: false, data: supported_freq},
                {label: 'Supported By', borderColor: "#70DA33", fill: false, data: supported_by_freq}
           ],
    options: { scales: { yAxes: [ { ticks: {beginAtZero: false} } ] }
    }
    }
});
</script>

<br><br><br>

<p class="">Discorda / Opõe-se / Acusa</p>
<table class="table">
  <tbody>
  {% for item in items.opposed %}
    <tr>
      <td><a href={{item.other_ent_url}}> {{item.other_ent_name}} </a></td>
      <td>{{item.date}}</td>
      <td><a href={{item.url}} target="_blank"> {{item.title}} </a></td>
      <td>{{item.score}}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>


<br><br>


<p class="">Apoia / Defende</p>
<table class="table">
  <tbody>
  {% for item in items.supported %}
    <tr>
      <td><a href={{item.other_ent_url}}> {{item.other_ent_name}} </a></td>
      <td>{{item.date}}</td>
      <td><a href={{item.url}} target="_blank"> {{item.title}} </a></td>
      <td>{{item.score}}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>


<br><br>

<p class="">Acusado por / Oposto por</p>
<table class="table">
  <tbody>
  {% for item in items.opposed_by %}
    <tr>
      <td><a href={{item.other_ent_url}}> {{item.other_ent_name}} </a></td>
      <td>{{item.date}}</td>
      <td><a href={{item.url}} target="_blank"> {{item.title}} </a></td>
      <td>{{item.score}}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>


<br><br>


<p class="">Apoiado por / Defendido por</p>
<table class="table">
  <tbody>
  {% for item in items.supported_by %}
    <tr>
      <td><a href={{item.other_ent_url}}> {{item.other_ent_name}} </a></td>
      <td>{{item.date}}</td>
      <td><a href={{item.url}} target="_blank"> {{item.title}} </a></td>
      <td>{{item.score}}</td>
    </tr>
  {% endfor %}
  </tbody>
</table>


</body>
</html>