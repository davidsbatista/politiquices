{% extends 'base.html' %}

{% block title %} Estatísticas {% endblock %}

{% block body %}

<div class="container" id="container">

    <div id="inner" class="w-100 p-1">

    <br><br>

    <div class="container d-flex align-items-center justify-content-center">
        <div class="w-75 p-2" align="center">
            <center>
                <h4><a href="/entities"><b>{{items.nr_persons}} personalidades políticas</b></a></h4>
            </center>
            <br><br>
            <center>
                <h4><a href="/parties"><b>{{items.nr_parties}} partidos políticos</b></a></h4>
            </center>
         </div>
    </div>

    <br><br>

    <div class="container h-100">
        <div class="row h-100 justify-content-center align-items-center">
            <h4><b>{{items.nr_articles}}</b> títulos de artigos analisados</h4>
            <br><br>
            <canvas id="myChart" width="1000" height="250"></canvas>
        </div>
    </div>

    <br><br>

    <div class="container h-100">
        <div class="row h-100 justify-content-center align-items-center">
            <h4><b>Nº Relações/Artigos por Personalidade</b></h4>
            <br><br>
            <canvas id="barChart_per_freq" width="100" height="250"></canvas>
        </div>
    </div>


    <br><br>

    <div class="container h-100">
        <div class="row h-100 justify-content-center align-items-center">
            <h4><b>Personalidades com mais co-ocorrências</b></h4>
            <br><br>
            <canvas id="barChart_co_occurr" width="100" height="250"></canvas>
        </div>
    </div>

    <script>
        
        // Articles
        var ctx = document.getElementById('myChart');
        var color = Chart.helpers.color;

        var year_labels = {{ items['nr_articles_year_labels']|tojson }};
        var year_articles = {{ items['nr_articles_year_values']|tojson }};

        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {labels: year_labels,
                   datasets: [{
                        label: 'No. of articles',
                        backgroundColor: "#4d6072",
                        data: year_articles
                        }]
                   }
            });
        
        // Person Freq.
        var ctx = document.getElementById('barChart_per_freq');
        var per_freq_labels = {{ items['per_freq_labels']|tojson }};
        var per_freq_values = {{ items['per_freq_values']|tojson }};

        var myBarChart = new Chart(ctx, {
            type: 'horizontalBar',
            data: {labels: per_freq_labels,
                   datasets: [{
                        label: 'No. of articles',
                        backgroundColor: "#4d6072",
                        data: per_freq_values
                        }]
                   }
        });
        
        // Person Co-Occur. Freq.
        
        var ctx = document.getElementById('barChart_co_occurr');
        var per_co_occ_labels = {{ items['per_co_occurrence_labels']|tojson }};
        var per_co_occ_values = {{ items['per_co_occurrence_values']|tojson }};


        var myBarChart = new Chart(ctx, {
            type: 'horizontalBar',
            data: {labels: per_co_occ_labels,
                   datasets: [{
                        label: 'No. of articles',
                        backgroundColor: "#4d6072",
                        data: per_co_occ_values
                        }]
                   }
        });


    </script>

    </div>

    <br><br>

</div>

{% endblock %}
